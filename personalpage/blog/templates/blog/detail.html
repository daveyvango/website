{% extends "base.html" %}
{% block title %}{{blog_post.title}} by {{blog_post.author.handle}}{% endblock %}
{% load static %}
{% block scripts %}
  <script src="{% static 'blog/js/tinymce/tinymce.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'blog/js/tinymce/editor.js' %}" ></script>
{% endblock %}
{% block body %}
{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
<br>

    <section class="hero is-medium is-bold">
        <div class="hero-body">
            <div class="container has-text-centered box"> 
                 <h1 class="title">{{blog_post.title}}</h1>
                 <h2 class="subtitle">Contributor: <a href="{% url 'blog:author_detail' blog_post.author.id%}">{{blog_post.author.handle }}</a></h2>
            </div>
        </div>
    </section>


            <div class="is-8 is-offset-2">
                <!-- START ARTICLE -->
                    <div id="blog_body">
                        <script type='application/javascript'>fetchBlog({{blog_post.id}})</script>
                    </div>
                {% if user.is_authenticated %}
                <div id="blog_editor">
                    <form action="{% url 'blog:update' %}" method="post">
                        {% csrf_token %}
                        Author handle: <strong>{{ blog_post.author.handle }}</strong><br>
                        <input type="hidden" name="author_handle" id="author_handle" value="{{ blog_post.author.handle}}"><br>
                        <input type="hidden" name="blog_id" id="blog_id" value="{{ blog_post.id}}"><br>
                        Title: <br>
                        <input type="text" name="post_title" id="post_title" value="{{blog_post.title}}"><br>
                        Post Content:<br>
                        <textarea id="post_text" name="post_text" width="75%">{{blog_post.text}}</textarea>
                        <input type="submit" value="Submit">
                    </form>
                </div>
                {% endif %}
            </div>
        <!-- END ARTICLE FEED -->
    <button id="edit_blog" onclick="fetchBlogToEdit({{blog_post.id}})">Edit</button>
    <div id="blog_text"></div>
{% endblock %}
